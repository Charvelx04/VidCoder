<Window x:Class="VidCoder.View.EncodingWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="clr-namespace:VidCoder"
	xmlns:controls="clr-namespace:VidCoder.Controls"
	xmlns:model="clr-namespace:HandBrake.Interop;assembly=HandBrakeInterop"
	xmlns:converters="clr-namespace:VidCoder.Converters"
	xmlns:resx="clr-namespace:VidCoder.Properties"
	xmlns:view="clr-namespace:VidCoder.View"
        xmlns:Encoding="clr-namespace:HandBrake.Interop.Model.Encoding;assembly=HandBrakeInterop"
        Title="{Binding WindowTitle}" Width="671" Height="467" MinWidth="588" MinHeight="467"
	Style="{StaticResource NormalWindow}" WindowStartupLocation="CenterOwner"
	Closing="Window_Closing"
	ShowInTaskbar="False" WindowStyle="ToolWindow">
	<Window.Resources>
		<local:EnumDisplayer Type="{x:Type Encoding:OutputFormat}" x:Key="OutputFormatChoices" />
	</Window.Resources>
	<Window.InputBindings>
		<KeyBinding Key="Q" Modifiers="Control" Command="{Binding ProcessingVM.AddToQueueCommand}" />
		<KeyBinding Key="L" Modifiers="Control" Command="{Binding WindowManagerVM.OpenLogWindowCommand}" />
		<KeyBinding Key="P" Modifiers="Control" Command="{Binding WindowManagerVM.OpenPreviewWindowCommand}" />
		<KeyBinding Key="O" Modifiers="Control+Shift" Command="{Binding ProcessingVM.QueueFilesCommand}" />
		<KeyBinding Key="T" Modifiers="Control" Command="{Binding ProcessingVM.QueueTitlesCommand}" />
		<KeyBinding Key="D" Modifiers="Control" Command="{Binding OutputPathVM.PickOutputPathCommand}" />

		<KeyBinding Key="Esc" Command="{Binding CancelCommand}" />
		<KeyBinding Key="S" Modifiers="Control" Command="{Binding SaveCommand}" />
		<KeyBinding Key="S" Modifiers="Control+Shift" Command="{Binding SaveAsCommand}" />
		<KeyBinding Key="F2" Command="{Binding RenameCommand}" />
	</Window.InputBindings>
	<Grid>
		<ToolBarPanel Margin="0,0,0,0" VerticalAlignment="Top" HorizontalAlignment="Left">
			<ToolBar ToolBarTray.IsLocked="True" Loaded="ToolBar_Loaded">
				<TextBlock
					Text="{Binding ProfileName}" Margin="0,4,0,0"
					Height="24" HorizontalAlignment="Left" VerticalAlignment="Top" Width="158" FontWeight="Bold" FontSize="14" TextAlignment="Center" TextTrimming="CharacterEllipsis" />
				<Button Height="24" Width="70"
					Visibility="{Binding SaveRenameButtonsVisible, Converter={StaticResource VisibilityConverter}}"
					Command="{Binding SaveCommand}">
					<StackPanel Orientation="Horizontal">
						<Image Source="/Icons/save.png" Width="16" Height="16" />
						<TextBlock Text="Save" Margin="5,0,0,0" />
					</StackPanel>
				</Button>
				<Button Height="24" Width="73"
					Command="{Binding SaveAsCommand}">Save As...</Button>
				<Button
					Content="Rename"
					Visibility="{Binding SaveRenameButtonsVisible, Converter={StaticResource VisibilityConverter}}"
					Height="24" Width="65"
					Command="{Binding RenameCommand}" />
				<Button
					Height="24" Width="70"
					Visibility="{Binding IsModified, Converter={StaticResource VisibilityConverter}}"
					Command="{Binding DeletePresetCommand}">
					<StackPanel Orientation="Horizontal">
						<Image Source="/Icons/undo_16x16.png" Width="16" Height="16" />
						<TextBlock Text="Revert" Margin="4,0,0,0" />
					</StackPanel>
				</Button>
				<Button
					Height="24" Width="70"
					Visibility="{Binding DeleteButtonVisible, Converter={StaticResource VisibilityConverter}}"
					Command="{Binding DeletePresetCommand}">
					<StackPanel Orientation="Horizontal">
						<Grid Background="Transparent">
							<Rectangle Width="14" Height="3" Fill="{StaticResource RedFill}">
								<Rectangle.LayoutTransform>
									<RotateTransform Angle="-45" />
								</Rectangle.LayoutTransform>
							</Rectangle>
							<Rectangle Width="14" Height="3" Fill="{StaticResource RedFill}">
								<Rectangle.LayoutTransform>
									<RotateTransform Angle="45" />
								</Rectangle.LayoutTransform>
							</Rectangle>
						</Grid>
						<TextBlock Text="Delete" Margin="4,0,0,0" />
					</StackPanel>
				</Button>
			</ToolBar>
		</ToolBarPanel>
		<Button
			Height="26" Margin="0,4,12,0" VerticalAlignment="Top" IsEnabled="{Binding HasSourceData}"
			Command="{Binding WindowManagerVM.PreviewWindowOpen}" HorizontalAlignment="Right" Width="77"
			Visibility="{Binding WindowManagerVM.PreviewWindowOpen, Converter={StaticResource VisibilityConverter}, ConverterParameter=True}">
			<StackPanel Orientation="Horizontal">
				<Image Source="/Icons/preview.png" />
				<TextBlock Text="Preview" Margin="5,0,0,0" VerticalAlignment="Center" />
			</StackPanel>
		</Button>

		<Label Height="28" HorizontalAlignment="Left" Margin="20,36,0,0" Name="label11" VerticalAlignment="Top" Width="69">Container:</Label>
		<ComboBox Height="23" HorizontalAlignment="Left" Margin="85,39,0,0" VerticalAlignment="Top" Width="58"
			ItemsSource="{Binding DisplayNames, Source={StaticResource OutputFormatChoices}}"
			SelectedValue="{Binding OutputFormat, Converter={StaticResource OutputFormatChoices}}"/>
		<Label Height="28" Margin="155.422,34,0,0" Name="label12" VerticalAlignment="Top" HorizontalAlignment="Left" Width="64"
			Visibility="{Binding ShowMp4Choices, Converter={StaticResource VisibilityConverter}}">Extension:</Label>
		<RadioButton Margin="221.422,34,0,0" Name="radioButton3" Height="16" VerticalAlignment="Top" HorizontalAlignment="Left" Width="53.578"
			IsChecked="{Binding PreferredExtension, Converter={StaticResource EnumBoolConverter}, ConverterParameter=Mp4}"
			Visibility="{Binding ShowMp4Choices, Converter={StaticResource VisibilityConverter}}"
			IsEnabled="{Binding Mp4ExtensionEnabled}"
			ToolTip="{Binding Mp4ExtensionToolTip}" ToolTipService.ShowOnDisabled="True">.mp4</RadioButton>
		<RadioButton Height="16" Margin="221.422,49,0,0" Name="radioButton4" VerticalAlignment="Top" HorizontalAlignment="Left" Width="53.578"
			IsChecked="{Binding PreferredExtension, Converter={StaticResource EnumBoolConverter}, ConverterParameter=M4v}"
			Visibility="{Binding ShowMp4Choices, Converter={StaticResource VisibilityConverter}}">.m4v</RadioButton>
		<CheckBox
			Content="Large file size" ToolTip="{x:Static resx:Resources.LargeFileSizeToolTip}"
			Margin="277.093,34,0,0" HorizontalAlignment="Left" Width="98.907" Height="16" VerticalAlignment="Top"
			Visibility="{Binding ShowMp4Choices, Converter={StaticResource VisibilityConverter}}"
			IsChecked="{Binding LargeFile}" />
		<CheckBox
			Content="Web optimized" ToolTip="{x:Static resx:Resources.WebOptimizedToolTip}"
			Height="16" Margin="277,52,0,0" VerticalAlignment="Top" Visibility="{Binding ShowMp4Choices, Converter={StaticResource VisibilityConverter}}"
			IsChecked="{Binding Optimize}" HorizontalAlignment="Left" Width="111" />
		<Grid Height="35" HorizontalAlignment="Left" Margin="385.995,34,0,0" VerticalAlignment="Top" Width="150">
			<StackPanel Orientation="Vertical" VerticalAlignment="Center">
				<CheckBox
					Content="iPod 5G support" ToolTip="{x:Static resx:Resources.IPod5GSupportToolTip}"
					Height="18" VerticalAlignment="Center"
					Visibility="{Binding ShowMp4Choices, Converter={StaticResource VisibilityConverter}}"
					IsChecked="{Binding IPod5GSupport}" />
				<CheckBox
					Content="Include chapter markers" ToolTip="{x:Static resx:Resources.IncludeChapterMarkersToolTip}"
					VerticalAlignment="Center"
					IsChecked="{Binding IncludeChapterMarkers}" />
			</StackPanel>
		</Grid>



		<TabControl Margin="0,73,0,0" Name="tabControl">
			<TabItem Header="Picture">
				<view:PicturePanel DataContext="{Binding PicturePanelViewModel}"/>
			</TabItem>
			<TabItem Header="Video Filters">
				<view:VideoFiltersPanel DataContext="{Binding VideoFiltersPanelViewModel}" />
			</TabItem>
			<TabItem Header="Video">
				<view:VideoPanel DataContext="{Binding VideoPanelViewModel}" />
			</TabItem>
			<TabItem Header="Audio">
				<view:AudioPanel DataContext="{Binding AudioPanelViewModel}" />
			</TabItem>
			<TabItem Header="Advanced">
				<view:AdvancedPanel DataContext="{Binding AdvancedPanelViewModel}" />
			</TabItem>
		</TabControl>

	</Grid>
</Window>
